<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Snake — Jeu HTML</title>
  <style>
    :root{--bg:#0b1220;--panel:#071021;--accent:#77dd77;--muted:#98a0b3}
    *{box-sizing:border-box;font-family:Inter, Roboto, system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial}
    body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#071026 0%, #05101a 100%);color:#e6eef8}
    .wrap{display:grid;grid-template-columns:420px 240px;gap:24px;align-items:start}
    .card{background:rgba(255,255,255,0.03);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    canvas{background:linear-gradient(135deg,#071b12,#05202a);display:block;border-radius:8px;width:400px;height:400px}
    h1{margin:0 0 8px 0;font-size:18px}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:8px 10px;border-radius:8px;color:var(--accent);cursor:pointer}
    .stats{display:flex;flex-direction:column;gap:8px}
    .stat{display:flex;justify-content:space-between;color:var(--muted)}
    .small{font-size:13px;color:var(--muted)}
    .hint{margin-top:12px;font-size:13px;color:var(--muted)}
    .footer{margin-top:14px;font-size:12px;color:var(--muted)}
    @media (max-width:800px){.wrap{grid-template-columns:1fr;gap:14px}canvas{width:320px;height:320px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Snake — Jeu HTML</h1>
      <canvas id="board" width="400" height="400"></canvas>
      <div class="controls">
        <button id="start">Démarrer</button>
        <button id="pause">Pause</button>
        <button id="restart">Recommencer</button>
        <button id="turbo">Turbo</button>
      </div>
      <div class="hint">Contrôles: flèches / ZQSD (AZERTY) / W A S D</div>
    </div>

    <div class="card stats">
      <div>
        <div class="stat"><strong>Score</strong><span id="score">0</span></div>
        <div class="stat"><strong>Meilleur</strong><span id="best">0</span></div>
        <div class="stat"><strong>Vitesse</strong><span id="speedLabel">Normal</span></div>
        <div class="stat"><strong>Queue</strong><span id="length">3</span></div>
      </div>
      <div class="footer">Astuce: appuyez sur P pour mettre en pause. Le meilleur score est sauvegardé localement.</div>
    </div>
  </div>

<script>
// Configuration
const canvas = document.getElementById('board');
const ctx = canvas.getContext('2d');
const S = 20; // taille d'une case
const COLS = canvas.width / S;
const ROWS = canvas.height / S;

let snake; // tableau de segments {x,y}
let dir; // dx,dy
let food;
let score = 0;
let best = Number(localStorage.getItem('snake_best') || 0);
let intervalId = null;
let baseDelay = 140; // ms entre frames (plus petit = plus rapide)
let delay = baseDelay;
let running = false;
let turbo = false;
let allowTurn = true;

// UI
const startBtn = document.getElementById('start');
const pauseBtn = document.getElementById('pause');
const restartBtn = document.getElementById('restart');
const turboBtn = document.getElementById('turbo');
const scoreEl = document.getElementById('score');
const bestEl = document.getElementById('best');
const lengthEl = document.getElementById('length');
const speedLabel = document.getElementById('speedLabel');

bestEl.textContent = best;

function reset(){
  snake = [ {x: Math.floor(COLS/2), y: Math.floor(ROWS/2)},
            {x: Math.floor(COLS/2)-1, y: Math.floor(ROWS/2)},
            {x: Math.floor(COLS/2)-2, y: Math.floor(ROWS/2)} ];
  dir = {x:1,y:0};
  spawnFood();
  score = 0;
  delay = baseDelay;
  running = false;
  allowTurn = true;
  updateUI();
  draw();
}

function spawnFood(){
  while(true){
    const fx = Math.floor(Math.random()*COLS);
    const fy = Math.floor(Math.random()*ROWS);
    if(!snake.some(s=>s.x===fx && s.y===fy)){
      food = {x:fx,y:fy};
      return;
    }
  }
}

function updateUI(){
  scoreEl.textContent = score;
  bestEl.textContent = best;
  lengthEl.textContent = snake.length;
  speedLabel.textContent = (delay<100)? 'Rapide' : (delay>180)? 'Lente' : 'Normal';
}

function draw(){
  // background
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // grille légère
  ctx.save();
  ctx.globalAlpha = 0.06;
  for(let x=0;x<=COLS;x++){
    ctx.fillRect(x*S-0.5,0,1,canvas.height);
  }
  for(let y=0;y<=ROWS;y++){
    ctx.fillRect(0,y*S-0.5,canvas.width,1);
  }
  ctx.restore();

  // nourriture
  ctx.fillStyle = '#ff6b6b';
  roundRect(ctx, food.x*S+3, food.y*S+3, S-6, S-6, 4, true, false);

  // serpent
  for(let i=snake.length-1;i>=0;i--){
    const s = snake[i];
    if(i===0){
      // tête
      ctx.fillStyle = '#77dd77';
      roundRect(ctx, s.x*S+1, s.y*S+1, S-2, S-2, 6, true, false);
      // oeil
      ctx.fillStyle = '#05211a';
      const eyeSize = Math.max(2, S/7);
      let ex = s.x*S + S/2 + dir.x*6;
      let ey = s.y*S + S/2 + dir.y*6;
      ctx.fillRect(ex-eyeSize/2, ey-eyeSize/2, eyeSize, eyeSize);
    } else {
      ctx.fillStyle = '#3fbf6f';
      roundRect(ctx, s.x*S+2, s.y*S+2, S-4, S-4, 4, true, false);
    }
  }
}

function roundRect(ctx, x, y, w, h, r, fill, stroke) {
  if (typeof r === 'undefined') r = 5;
  if (typeof r === 'number') r = {tl: r, tr: r, br: r, bl: r};
  ctx.beginPath();
  ctx.moveTo(x + r.tl, y);
  ctx.lineTo(x + w - r.tr, y);
  ctx.quadraticCurveTo(x + w, y, x + w, y + r.tr);
  ctx.lineTo(x + w, y + h - r.br);
  ctx.quadraticCurveTo(x + w, y + h, x + w - r.br, y + h);
  ctx.lineTo(x + r.bl, y + h);
  ctx.quadraticCurveTo(x, y + h, x, y + h - r.bl);
  ctx.lineTo(x, y + r.tl);
  ctx.quadraticCurveTo(x, y, x + r.tl, y);
  ctx.closePath();
  if (fill) ctx.fill();
  if (stroke) ctx.stroke();
}

function step(){
  // avance le serpent
  const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
  // rebords: on traverse l'écran
  head.x = (head.x + COLS) % COLS;
  head.y = (head.y + ROWS) % ROWS;

  // collision avec corps ?
  if(snake.some((s,i)=>i>0 && s.x===head.x && s.y===head.y)){
    gameOver();
    return;
  }

  snake.unshift(head);

  // manger la nourriture ?
  if(head.x===food.x && head.y===food.y){
    score += 10;
    // accélère légèrement
    delay = Math.max(60, delay - 4);
    spawnFood();
  } else {
    snake.pop();
  }

  if(score > best){
    best = score;
    localStorage.setItem('snake_best', String(best));
  }

  updateUI();
  draw();
  allowTurn = true;
}

function loopStart(){
  if(intervalId) clearInterval(intervalId);
  intervalId = setInterval(step, delay);
}

function startGame(){
  if(running) return;
  running = true;
  loopStart();
}

function pauseGame(){
  if(!running) return;
  running = false;
  clearInterval(intervalId);
}

function gameOver(){
  pauseGame();
  alert('Game over ! Score: '+score);
}

// Input
window.addEventListener('keydown', e => {
  const key = e.key.toLowerCase();
  // flèches & WASD & ZQSD
  const mapping = {
    'arrowup': {x:0,y:-1}, 'arrowdown':{x:0,y:1}, 'arrowleft':{x:-1,y:0}, 'arrowright':{x:1,y:0},
    'w':{x:0,y:-1}, 's':{x:0,y:1}, 'a':{x:-1,y:0}, 'd':{x:1,y:0},
    'z':{x:0,y:-1}, 'q':{x:-1,y:0}
  };
  if(key === 'p'){
    if(running) pauseGame(); else startGame();
    return;
  }
  if(mapping[key] && allowTurn){
    const nd = mapping[key];
    // interdire demi-tour
    if(nd.x === -dir.x && nd.y === -dir.y) return;
    dir = nd;
    allowTurn = false;
  }
});

// Buttons
startBtn.addEventListener('click', ()=>{ startGame(); });
pauseBtn.addEventListener('click', ()=>{ pauseGame(); });
restartBtn.addEventListener('click', ()=>{ reset(); startGame(); });
turboBtn.addEventListener('click', ()=>{ turbo = !turbo; if(turbo){ delay = Math.max(40, delay - 60); turboBtn.textContent = 'Turbo ✓' } else { delay = baseDelay; turboBtn.textContent = 'Turbo' } if(running) loopStart(); updateUI(); });

// support tactile simple: swipe detection
let touchStart = null;
canvas.addEventListener('touchstart', e => { const t = e.touches[0]; touchStart = {x:t.clientX, y:t.clientY}; });
canvas.addEventListener('touchend', e => {
  if(!touchStart) return;
  const t = e.changedTouches[0];
  const dx = t.clientX - touchStart.x; const dy = t.clientY - touchStart.y;
  if(Math.abs(dx) > Math.abs(dy)){
    if(dx>20) trySetDir(1,0); else if(dx<-20) trySetDir(-1,0);
  } else {
    if(dy>20) trySetDir(0,1); else if(dy<-20) trySetDir(0,-1);
  }
  touchStart = null;
});
function trySetDir(x,y){ if(allowTurn && !(x===-dir.x && y===-dir.y)){ dir={x,y}; allowTurn=false; }}

// initialisation
reset();
// draw une première fois
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Ultimate Game Stash — Snake & Geometry Dash</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background: #071026; color: #fff; font-family: sans-serif; }
        button { margin: 10px; padding: 10px 20px; font-size: 16px; border-radius: 6px; border: none; cursor: pointer; background: #77dd77; color: #000; }
        iframe { border: none; width: 800px; height: 600px; margin-top: 20px; display: none; }
    </style>
</head>

<body>
    <h1>Ultimate Game Stash</h1>
    <div>
        <button id="playSnake">Jouer à Snake</button>
        <button id="playGeoDash">Jouer à Geometry Dash</button>
    </div>

    <!-- Game Frames -->
    <iframe id="snakeFrame" src=""></iframe>
    <iframe id="geoFrame" src="https://rawcdn.githack.com/genizy/google-class/main/gdlite/index.html"></iframe>

    <script>
        const snakeFrame = document.getElementById('snakeFrame');
        const geoFrame = document.getElementById('geoFrame');

        document.getElementById('playSnake').addEventListener('click', () => {
            snakeFrame.src = 'YOUR_SNAKE_GAME_URL_HERE'; // Remplace par l'URL où ton Snake est hébergé
            snakeFrame.style.display = 'block';
            geoFrame.style.display = 'none';
        });

        document.getElementById('playGeoDash').addEventListener('click', () => {
            geoFrame.style.display = 'block';
            snakeFrame.style.display = 'none';
        });
    </script>
</body>

</html>
